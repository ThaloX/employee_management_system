{% extends "Emp_base.html" %}

{% block main %}
<div class="card shadow m-2">
    <div class="card-body">
        <h5 class="p-2" style="border-bottom: 2px solid rgb(49, 50, 49); color: rgb(10, 202, 138);">Experience</h5>

        <div class="container-fluid">
            <form id="experience-form" method="post">
                {% csrf_token %}

                {% if error %}
                    <p>{{ error }}</p>
                {% endif %}

                <div class="form-row">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label style="color: black;">Company</label>
                            <input type="text" name="company" class="form-control" placeholder="Enter Company" value="{{ experience.company|default_if_none:'' }}">
                        </div>
                    </div>

                    <div class="col-sm-6">
                        <div class="form-group">
                            <label style="color: black;">Position</label>
                            <input type="text" name="position" class="form-control" placeholder="Enter Position" value="{{ experience.position|default_if_none:'' }}">
                        </div>
                    </div>

                    <div class="col-sm-6">
                        <div class="form-group">
                            <label style="color: black;">Start Date</label>
                            <input type="date" name="start_date" class="form-control" value="{{ experience.start_date|default_if_none:'' }}">
                        </div>
                    </div>

                    <div class="col-sm-6">
                        <div class="form-group">
                            <label style="color: black;">End Date</label>
                            <input type="date" name="end_date" class="form-control" value="{{ experience.end_date|default_if_none:'' }}">
                        </div>
                    </div>

                    <div class="col-sm-12">
                        <div class="form-group">
                            <label style="color: black;">Description</label>
                            <textarea name="description" class="form-control" placeholder="Enter Description">{{ experience.description|default_if_none:'' }}</textarea>
                        </div>
                    </div>
                </div>

                <button type="submit" class="m-2 px-3 btn btn-primary" style="background-color: rgb(10, 202, 138);">Save</button>
            </form>
        </div>
    </div>
</div>

<div id="table-container">
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Company</th>
                <th>Position</th>
                <th>Start Date</th>
                <th>End Date</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody id="experience-table-body">
            <!-- Table rows will be dynamically added here -->
        </tbody>
    </table>
</div>

<script>
    // Function to add a new row to the experience table
    function addExperienceRow(company, position, startDate, endDate, description) {
        var tableBody = document.getElementById("experience-table-body");

        var newRow = document.createElement("tr");

        var companyCell = document.createElement("td");
        companyCell.textContent = company;
        newRow.appendChild(companyCell);

        var positionCell = document.createElement("td");
        positionCell.textContent = position;
        newRow.appendChild(positionCell);

        var startDateCell = document.createElement("td");
        startDateCell.textContent = startDate;
        newRow.appendChild(startDateCell);

        var endDateCell = document.createElement("td");
        endDateCell.textContent = endDate;
        newRow.appendChild(endDateCell);

        var descriptionCell = document.createElement("td");
        descriptionCell.textContent = description;
        newRow.appendChild(descriptionCell);

        tableBody.appendChild(newRow);
    }

    // Event listener for the form submission
    document.getElementById("experience-form").addEventListener("submit", function (event) {
        event.preventDefault(); // Prevent form submission

        // Get the form values
        var company = document.querySelector("input[name='company']").value;
        var position = document.querySelector("input[name='position']").value;
        var startDate = document.querySelector("input[name='start_date']").value;
        var endDate = document.querySelector("input[name='end_date']").value;
        var description = document.querySelector("textarea[name='description']").value;

        // Add a new row to the experience table
        addExperienceRow(company, position, startDate, endDate, description);

        // Reset the form
        document.getElementById("experience-form").reset();
    });
</script>

{% endblock %}
